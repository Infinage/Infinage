#!/bin/bash
# Cross-platform copy helper

# If $* is non empty use that, else use cat
# Work with both `echo hi | copy` and `copy hi`
input="${*:-$(cat)}"

if command -v pbcopy >/dev/null 2>&1; then
    printf "%s" "$input" | pbcopy
elif command -v wl-copy >/dev/null 2>&1; then
    printf "%s" "$input" | wl-copy
elif command -v xclip >/dev/null 2>&1; then
    printf "%s" "$input" | xclip -selection clipboard
elif command -v xsel >/dev/null 2>&1; then
    printf "%s" "$input" | xsel --clipboard --input
else
    printf "\033]52;c;%s\033\\" "$(printf "%s" "$input" | base64 | tr -d '\n')"
fi
